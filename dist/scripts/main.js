"use strict";var SARCAT=function(){var a={};a.config={};var b=function(a,c,d){var e=d3.select(c),f=a.type;f="select"===f&&a.vals.length<6?"radio":f;var g=a.value;if(d&&(e=e.append("div").attr("class","col-xs-6"),e.append("h4").attr("class","control-label").style("text-align","left").text(function(){return a.name})),a.data)return void a.data.forEach(function(a){b(a,c,!0)});if("select"===f){var h=e.append("select").attr("class","form-control");h.selectAll("option").data(a.vals).enter().append("option").attr("value",function(a){return a}).text(function(a){return a});var i=a.vals.indexOf(g);h.property("selectedIndex",i)}if("text"===f&&e.append("input").attr("type","text").attr("class","form-control").attr("placeholder",function(){return a.name}),"number"===f&&e.append("input").attr("type","number").attr("class","form-control").attr("value",g),"radio"===f){e=e.append("div").classed("btn-group",!0).attr("data-toggle","buttons");var j=e.selectAll("radio").data(a.vals),k=j.enter().append("label").attr("class",function(a){var b=g===a?"active":"";return"btn btn-primary "+b});k.text(function(a){return a}),k.append("input").attr("type","radio").attr("name",function(){return a.name})}if("date"===f){var l=(new Date).toISOString().substr(0,10);e.append("input").attr("type","date").attr("class","form-control").attr("value",l)}"textarea"===f&&e.append("textarea").attr("class","form-control").attr("rows","3").attr("placeholder",function(){return a.placeholder})},c=function(a){var c=a.config,d=d3.select("body").append("div").attr("id","form-container").attr("class","container");d.append("div").attr("class","page-header"),d.append("h3").html("SARCAT <small>Missing persons database entry.</small>");var e=d.append("div").attr("class","row pad0");e.append("div").attr("class","col-md-12 paxd5").append("div").attr("class","progress").append("div").attr("class","progress-bar progress-bar-info progress-bar-striped").text("0%"),e.append("div").attr("class","col-md-12 pad5y").append("div").attr("class","step");var f=d.append("div").attr("class","row formContainer").append("div").attr("class",function(){return"col-md-12 formFill"}).selectAll("form").data(c),g=f.enter().append("form").attr("class",function(a,b){var c=0===b?"step"+a.step:"_hidden step"+a.step;return"col-md-12 form-horizontal "+c});g.append("legend").text(function(a){return a.name}),g.select(function(a){var c=a.data||[],d=d3.select(this).selectAll("div").data(c).enter().append("div").attr("class","form-group pad5").append("div").attr("class","col-md-12 pad5 form-group-style");d.append("label").attr("class","control-label col-xs-2").text(function(a){return a.name}),d.append("div").attr("class","col-xs-10").select(function(a){b(a,this)})});var h=d3.select(".step").selectAll("p").data(c),i=h.enter().append("div").attr("class",function(a,b){return 0===b?"activestep steps btnStep"+b:"steps btnStep"+b}).on("click",function(a,b){f.classed("hidden",!0),f.each(function(b){b.step===a.step&&d3.select(this).classed("hidden",!1)});var c=d3.select(this),d=10*b;d3.select(".progress-bar").style("width",d+"%").attr("aria-valuenow",d).text(d+"%"),i.classed("activestep",!1),c.classed("activestep",!0)});i.append("span").attr("class","glyphicon glyphicon-ok btn-md"),i.append("h6").text(function(a){return a.name})},d=function(a,b){a.insert("div",":first-child").attr("id","map").style({height:"500px",width:"100%"}),L.mapbox.accessToken="pk.eyJ1IjoibWFwcGlza3lsZSIsImEiOiJ5Zmp5SnV3In0.mTZSyXFbiPBbAsJCFW8kfg",L.mapbox.map("map","examples.map-i86nkdio").setView([40,-74.5],9),b&&b()};return a.login=function(){a.dashboard()},a.generateLoginPage=function(){var b=d3.select("body").append("div").attr("class","login"),c=b.append("div").attr("class","intro-text");c.append("div").attr("class","intro-lead-in").text("Missing persons database entry."),c.append("div").attr("class","iintro-heading").text("SARCAT");var d=b.append("div").attr("class","wrapper").append("form").attr("class","form-signin");d.append("h2").attr("class","form-signin-heading").text("Login"),d.append("input").attr("autofocus","").attr("class","form-control").attr("name","username").attr("value","SARCATUser@sarcat.org").attr("type","text").attr("required",""),d.append("input").attr("autofocus","").attr("class","form-control").attr("name","username").attr("value","aaaaaa").attr("type","password").attr("required","");var e=d.append("label").attr("class","checkbox");e.append("input").attr("type","checkbox"),e.append("p").text("Remember Me"),d.append("button").attr("class","btn btn-lg btn-primary btn-block demoLogin").attr("type","button").text("Login").on("click",function(){a.login()}),d.append("button").attr("class","btn btn-lg btn-default btn-block demoLogin").attr("type","button").text("Not Registered?")},a.dashboard=function(){d3.json("data/login.json",function(){d3.select(".wrapper").style({display:"none"});var b=d3.select(".login").append("div").attr("class","form-welcome");b.append("h1").text("Welcome User!"),b.append("hr"),b.append("button").attr("type","button").attr("class","btn btn-primary btn-lg btn-block").text("Create New Record").on("click",function(){a.generateForm()}),b.append("button").attr("type","button").attr("class","btn btn-default btn-lg btn-block").text("Edit Existing Record")})},a.generateForm=function(){d3.json("data/config.json",function(a){d3.select(".login").style({display:"none"}),c(a),d(d3.select(".step2"),function(){$(".btnStep0").click()})})},a};!function(){var a=SARCAT();a.generateLoginPage()}();